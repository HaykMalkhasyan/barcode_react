{"ast":null,"code":"import history from \"../../history\";\nexport var SESSION_FORBIDDEN = 'SESSION_FORBIDDEN';\nexport default function sessionMiddleware() {\n  return function (_ref) {\n    var getState = _ref.getState,\n        dispatch = _ref.dispatch;\n    return function (next) {\n      return function (action) {\n        if (typeof action === 'function') {\n          return action(dispatch, getState);\n        }\n\n        if (action.error && action.error.response && action.error.response.status === 403) {\n          dispatch({\n            type: SESSION_FORBIDDEN,\n            prevPath: history.location.pathname\n          });\n        }\n\n        return next(action);\n      };\n    };\n  };\n}","map":{"version":3,"sources":["C:/Users/User/Desktop/barcode/src/redux/middlewares/sessionMiddleware.js"],"names":["history","SESSION_FORBIDDEN","sessionMiddleware","getState","dispatch","next","action","error","response","status","type","prevPath","location","pathname"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,eAApB;AAEA,OAAO,IAAMC,iBAAiB,GAAG,mBAA1B;AAEP,eAAe,SAASC,iBAAT,GAA6B;AACxC,SAAO,gBAA0B;AAAA,QAAxBC,QAAwB,QAAxBA,QAAwB;AAAA,QAAdC,QAAc,QAAdA,QAAc;AAC7B,WAAO,UAAAC,IAAI;AAAA,aAAI,UAAAC,MAAM,EAAI;AACrB,YAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AAC9B,iBAAOA,MAAM,CAACF,QAAD,EAAWD,QAAX,CAAb;AACH;;AACD,YAAIG,MAAM,CAACC,KAAP,IAAgBD,MAAM,CAACC,KAAP,CAAaC,QAA7B,IAAyCF,MAAM,CAACC,KAAP,CAAaC,QAAb,CAAsBC,MAAtB,KAAiC,GAA9E,EAAmF;AAC/EL,UAAAA,QAAQ,CAAC;AAACM,YAAAA,IAAI,EAACT,iBAAN;AAAyBU,YAAAA,QAAQ,EAACX,OAAO,CAACY,QAAR,CAAiBC;AAAnD,WAAD,CAAR;AACH;;AACD,eAAQR,IAAI,CAACC,MAAD,CAAZ;AACH,OARU;AAAA,KAAX;AASH,GAVD;AAWH","sourcesContent":["import history from \"../../history\"\r\n\r\nexport const SESSION_FORBIDDEN = 'SESSION_FORBIDDEN';\r\n\r\nexport default function sessionMiddleware() {\r\n    return ({getState, dispatch}) => {\r\n        return next => action => {\r\n            if (typeof action === 'function') {\r\n                return action(dispatch, getState);\r\n            }\r\n            if (action.error && action.error.response && action.error.response.status === 403) {\r\n                dispatch({type:SESSION_FORBIDDEN, prevPath:history.location.pathname})\r\n            }\r\n            return  next(action);\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}